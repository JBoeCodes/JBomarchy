#!/usr/bin/env python3
import json, os

colors_path = os.path.expanduser("~/.cache/wal/colors.json")
out_path    = os.path.expanduser("~/.cache/wal/colors-hyprland.conf")

with open(colors_path) as f:
    d = json.load(f)["colors"]

def rgba_hex(hex6, alpha_hex):
    return f"rgba({hex6.lstrip('#')}{alpha_hex})"

c2 = rgba_hex(d["color2"], "ff")  # active accent 1
c6 = rgba_hex(d["color6"], "ff")  # active accent 2
c0 = rgba_hex(d["color0"], "99")  # inactive base 1 (~60% alpha)
c8 = rgba_hex(d["color8"], "99")  # inactive base 2
shadow = rgba_hex(d["color8"], "cc")

out = f"""general {{
    col.active_border   = {c2} {c6} 45deg
    col.inactive_border = {c0} {c8} 45deg
}}

decoration {{
    shadow {{
        color = {shadow}
    }}
}}
"""

os.makedirs(os.path.dirname(out_path), exist_ok=True)
with open(out_path, "w") as f:
    f.write(out)
